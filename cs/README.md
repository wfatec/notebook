<!-- TOC -->

- [计算机原理](#计算机原理)
    - [计算机线程](#计算机线程)
        - [锁](#锁)
    - [TCP/IP](#tcpip)

<!-- /TOC -->

# 计算机原理

## 计算机线程

- 计算机线程在创建时就会被打上编号，例如`0x9527`，这个编号将伴随该线程的整个生命周期。

- 计算机会通过线程来执行一个个任务，每个任务会写明具体的操作步骤。

- 线程在执行之前会进入就绪队列，等待`cpu`等资源的分配。

- 线程在执行时，如遇到耗时操作，如查询数据库等操作，会记录当前的执行步骤，并退出运行态，进入等待状态，直到查询数据返回后才在合适的时间被`cpu`重新执行。

- 线程如果占用过多资源，造成阻塞，则会被`kill`掉，并被垃圾回收。

- 线程池中的线程会重复使用，直到计算机重启。

- 一般我们会通过使用缓存而非直接从数据库获取数据，这样可以大幅提高响应效率，但前提第一次访问时需要将数据写入缓存之中。

### 锁

对于有些敏感操作，例如银行卡存取等情况，需要使用**锁**来保证账户在同一时间只会被一个线程更改。

但是有一种情况又回产生新的问题，如`A`账户在向`B`账户转账，此时`A`账户加锁，但此时如果`B`也在向`A`转账，那么`B`也会加锁。这时就会出现我们大名鼎鼎的锁死状态，导致线程及其资源无法释放。这时，操作系统就会随机`kill`掉其中一方的线程，并释放其中的资源。

为了防止死锁状态的出现，多个资源加锁时，操作系统一般会按照资源大小来排序，线程调度工具会按照顺序来申请锁，这样可以有效减少锁死的的出现。

## TCP/IP